{"version":3,"sources":["../client/actions.js"],"names":[],"mappings":"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","file":"actions.js","sourcesContent":["var GET_GAME_REQUEST = 'GET_GAME_REQUEST';\nvar GET_GAME_SUCCESS = 'GET_GAME_SUCCESS';\nvar GET_GAME_ERROR = 'GET_GAME_ERROR';\nvar ERROR = 'ERROR';\nvar CHAR_SELECTED = 'CHAR_SELECTED';\nvar MOVE_SELECTED = 'MOVE_SELECTED';\nvar MOVE_CHARACTER = 'MOVE_CHARACTER';\nvar REMOVE_CHARACTER = 'REMOVE_CHARACTER';\nvar FADE_CHARACTER = 'FADE_CHARACTER';\nvar ADD_CHARACTER = 'ADD_CHARACTER';\nvar CHANGE_GAME_TURN = 'CHANGE_GAME_TURN';\nvar UPDATE_GAME_SCORE = 'UPDATE_GAME_SCORE';\nvar COMPLETE_GAME = 'COMPLETE_GAME';\nvar ADD_MY_GAME = 'ADD_MY_GAME';\nvar TOGGLE_CREATE_GAME_MENU = 'TOGGLE_CREATE_GAME_MENU';\nvar CHANGE_ANIME_DIFFICULTY = 'CHANGE_ANIME_DIFFICULTY';\nvar CHANGE_CHAR_DIFFICULTY = 'CHANGE_CHAR_DIFFICULTY';\nvar CHANGE_CHAR_IMAGE = 'CHANGE_CHAR_IMAGE';\nvar CHAR_IMAGE_CHANGED = 'CHAR_IMAGE_CHANGED';\nvar GET_ADVICE = 'GET_ADVICE';\n\nvar startTestGame = function () {\n    return (dispatch) => {\n        var initialGame = {\n            \"Id\": \"test\",\n            \"Field\": [\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/10/240997.jpg\", \"Row\": 2, \"Col\": 0},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/12/292611.jpg\", \"Row\": 2, \"Col\": 4},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/6/83657.jpg\", \"Row\": 7, \"Col\": 4},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/11/200455.jpg\", \"Row\": 3, \"Col\": 3},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/10/103220.jpg\", \"Row\": 4, \"Col\": 1},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/3/55714.jpg\", \"Row\": 8, \"Col\": 0},\n                {\"Img\": \"http://cdn.myanimelist.net/images/characters/14/80297.jpg\", \"Row\": 4, \"Col\": 5}],\n            \"Height\": 9,\n            \"Width\": 9,\n            \"Line\": 3,\n            \"MaxTitleChar\": 5,\n            \"Turn\": 1,\n            \"Score\": {\n                \"CompletedTitles\": [],\n                \"CompletedGroups\": [],\n                \"TotalScore\": -1000,\n                \"ChangeImgs\": [],\n                \"Advices\": []\n            },\n            \"Date\": \"2016-08-08T22:21:52.819+03:00\",\n            \"EndDate\": \"2016-08-08T22:21:52.819+03:00\",\n            \"Difficulty\": 1,\n            \"UserName\": \"\",\n            \"UserItems\": []\n        };\n        dispatch({\n            type: GET_GAME_SUCCESS,\n            payload: initialGame\n        });\n        var moves = [];\n        var firstMove = {\"Path\":[[1,5],[1,4],[1,3],[2,3],[2,2],[2,1]],\n            \"Completed\":[[3,3],[2,4],[1,5]],\n            \"NewChars\":[],\"NextTurn\":2,\n            \"GameScore\":[{\"Id\":17265,\"Title\":\"Log Horizon\",\"English\":\"Log Horizon\",\"Turn\":5,\"Characters\":[{\"Id\":81371,\"Name\":\"Naotsugu\",\"Img\":\"http://cdn.myanimelist.net/images/characters/11/200455.jpg\",\"Score\":1},{\"Id\":81369,\"Name\":\"Akatsuki\",\"Img\":\"http://cdn.myanimelist.net/images/characters/12/292611.jpg\",\"Score\":2},{\"Id\":81367,\"Name\":\"Shiroe\",\"Img\":\"http://cdn.myanimelist.net/images/characters/10/240997.jpg\",\n                \"Score\":3}]}]};\n        var secondMove = {\"Path\":[[6,3],[7,3],[8,3],[8,2],[8,1]],\n            \"Completed\":[],\"NewChars\":[],\"NextTurn\":3,\"GameScore\":[]};\n        var thirdMove = {\"Path\":[[5,2],[4,2],[4,3],[4,4]],\n            \"Completed\":[[6,3],[5,2],[4,1],[7,4],[1,4]],\"NewChars\":[],\n            \"NextTurn\":4,\n            \"GameScore\":[{\"Id\":2966,\"Title\":\"Ookami to Koushinryou\",\"English\":\"Spice and Wolf\",\"Turn\":7,\"Characters\":[{\"Id\":7376,\"Name\":\"Arendt, Norah\",\"Img\":\"http://cdn.myanimelist.net/images/characters/3/55714.jpg\",\"Score\":1},{\"Id\":24360,\"Name\":\"Liechten, Marhait\",\"Img\":\"http://cdn.myanimelist.net/images/characters/14/80297.jpg\",\"Score\":2},{\"Id\":7374,\"Name\":\"Lawrence, Kraft\",\"Img\":\"http://cdn.myanimelist.net/images/characters/10/103220.jpg\",\"Score\":3},{\"Id\":7373,\"Name\":\"Holo\",\"Img\":\"http://cdn.myanimelist.net/images/characters/6/83657.jpg\",\"Score\":4}]}]\n        };\n        moves.push([{\"Row\": 2, \"Col\": 0}, firstMove]);\n        moves.push([{\"Row\": 8, \"Col\": 0}, secondMove]);\n        moves.push([{\"Row\": 4, \"Col\": 5}, thirdMove]);\n        for(var i = 1; i <= moves.length; i++) {\n            setTimeout(((char, data) => {\n                moveCallbackFactory(dispatch, char)(data)\n            }).bind(this, moves[i-1][0], moves[i-1][1]), 1000*i);\n        }\n\n    }\n};\n\nvar fetchingAdvice = false;\nvar getAdvice = function (gameId) {\n    return (dispatch) => {\n        if (!fetchingAdvice) {\n            fetchingAdvice = true;\n            $.ajax({\n                method: \"PUT\",\n                url: '/game?gameId=' + gameId + '&action=advice',\n                contentType: 'application/json'\n            }).done((data) => {\n                fetchingAdvice = false;\n                dispatch({\n                    type: GET_ADVICE,\n                    payload: data\n                });\n            }).fail((xhr) => {\n                fetchingAdvice = false;\n                dispatch({\n                    type: ERROR,\n                    payload: 'Get advice error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n                });\n                removeErrorAfter(5000, dispatch);\n            });\n        }\n    }\n};\n\nvar toggleCreateGame = function () {\n    return {\n        type: TOGGLE_CREATE_GAME_MENU\n    }\n};\n\nvar removeErrorAfter = function (timeOut, dispatch) {\n    setTimeout(() => {\n        dispatch({\n            type: ERROR,\n            payload: ''\n        })\n    }, timeOut);\n};\n\nvar completeGame = function (gameId) {\n    return (dispatch) => {\n        $.ajax({\n            method: \"PUT\",\n            url: '/game?gameId=' + gameId + '&action=complete',\n            contentType: 'application/json'\n        }).done((data) => {\n            dispatch({\n                type: COMPLETE_GAME\n            });\n        }).fail((xhr) => {\n            dispatch({\n                type: ERROR,\n                payload: 'Complete game error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n            });\n            removeErrorAfter(5000, dispatch);\n        });\n    }\n};\n\nvar moveCharacter = function (char, row, col) {\n    return {\n        type: MOVE_CHARACTER,\n        payload: {char, row, col}\n    }\n};\n\nvar groupDispatchChar = (dispatch, array, type) => {\n    for (var i = 0; i < array.length; i++) {\n        dispatch({\n            type: type,\n            payload: {row: array[i][0], col: array[i][1]}\n        });\n    }\n};\n\nvar removeAndAddNewChars = (dispatch, data) => {\n    const {Completed, NewChars, NextTurn, GameScore} = data;\n    moveLock = false;\n    var timeOutAdd = 0;\n    if (Completed.length > 0) {\n        timeOutAdd = 300;\n    }\n    //hot browser cache\n    for (var j = 0; j < NewChars.length; j++) {\n        var newImg = new Image();\n        newImg.src = NewChars[j].Img;\n    }\n    setTimeout(() => {\n        groupDispatchChar(dispatch, Completed, FADE_CHARACTER);\n    }, 50);\n    setTimeout(() => {\n        groupDispatchChar(dispatch, Completed, REMOVE_CHARACTER);\n        for (var j = 0; j < NewChars.length; j++) {\n            dispatch({\n                type: ADD_CHARACTER,\n                payload: NewChars[j]\n            });\n        }\n        // start new character animation\n        setTimeout(() => {\n            dispatch({\n                type: CHANGE_GAME_TURN,\n                payload: NextTurn\n            });\n            dispatch({\n                type: UPDATE_GAME_SCORE,\n                payload: GameScore\n            });\n        }, 50);\n    }, timeOutAdd);\n\n};\n\nvar moveCallbackFactory = (dispatch, char) => {\n    return (data) => {\n        var path = data.Path;\n        var callBack = () => {\n            var current = path.pop();\n            var row = current[0];\n            var col = current[1];\n            dispatch({\n                type: MOVE_CHARACTER,\n                payload: {char, row, col}\n            });\n            if (path.length > 0) {\n                char.Row = row;\n                char.Col = col;\n                setTimeout(callBack, 100);\n            } else {\n                removeAndAddNewChars(dispatch, data)\n            }\n        };\n        callBack();\n    }\n};\n\nvar moveLock = false;\nvar moveSelected = function (gameId, char, Row, Col) {\n    return (dispatch) => {\n        if (!moveLock) {\n            moveLock = true;\n            $.ajax({\n                method: \"PUT\",\n                url: '/game?gameId=' + gameId + '&action=move',\n                data: JSON.stringify({char, Row, Col}),\n                contentType: 'application/json',\n                dataType: 'json'\n            }).done(moveCallbackFactory(dispatch, char)).fail((xhr) => {\n                dispatch({\n                    type: ERROR,\n                    payload: 'Make turn error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n                });\n                removeErrorAfter(5000, dispatch);\n                moveLock = false;\n            });\n        }\n\n    }\n};\n\nvar changeImage = function (gameId, char) {\n    return (dispatch) => {\n        $.ajax({\n            method: \"PUT\",\n            url: '/game?gameId=' + gameId + '&action=changeImg',\n            data: JSON.stringify({char}),\n            contentType: 'application/json',\n            dataType: 'json'\n        }).done((data) => {\n            dispatch({\n                type: CHAR_IMAGE_CHANGED,\n                payload: data\n            });\n        }).fail((xhr) => {\n            dispatch({\n                type: ERROR,\n                payload: 'Change image error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n            });\n            removeErrorAfter(5000, dispatch);\n        });\n    }\n};\n\nvar selectChar = function (char) {\n    return {\n        type: CHAR_SELECTED,\n        payload: char\n    }\n};\n\nvar createGame = function (diff, userName) {\n    return (dispatch) => {\n        dispatch({\n            type: GET_GAME_REQUEST\n        });\n        $.post({\n            'url': '/game',\n            'data': JSON.stringify({Diff: diff, UserName: userName}),\n            contentType: 'application/json'\n        })\n            .done((data) => {\n                window.location.hash = '#game/' + data.Id;\n                if (supports_html5_storage()) {\n                    if (!localStorage.games) {\n                        localStorage.games = data.Id;\n                    } else {\n                        localStorage.games = localStorage.games + ',' + data.Id;\n                    }\n                }\n                dispatch({\n                    type: ADD_MY_GAME,\n                    payload: data.Id\n                });\n                dispatch({\n                    type: GET_GAME_SUCCESS,\n                    payload: data\n                })\n            })\n            .fail((xhr) => {\n                dispatch({\n                    type: GET_GAME_ERROR\n                });\n                dispatch({\n                    type: ERROR,\n                    payload: 'Create new game error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n                });\n                removeErrorAfter(5000, dispatch);\n            });\n    }\n};\n\nvar getGame = function (gameId) {\n    return (dispatch) => {\n        dispatch({\n            type: GET_GAME_REQUEST\n        });\n        $.get('/game?gameId=' + gameId, (data) => {\n            window.location.hash = '#game/' + data.Id;\n            dispatch({\n                type: GET_GAME_SUCCESS,\n                payload: data\n            })\n        }).fail((xhr) => {\n            dispatch({\n                type: ERROR,\n                payload: 'Get game error: ' + (xhr.responseJSON ? xhr.responseJSON['Message'] : '')\n            });\n            removeErrorAfter(5000, dispatch);\n        });\n    }\n};"]}