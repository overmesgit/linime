{"version":3,"sources":["../client/tutorial.js"],"names":[],"mappings":"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","file":"tutorial.js","sourcesContent":["var initialTutorialMove = {\n    7: {\"Path\":[[0,6],[0,5],[0,4],[0,3],[1,3],[2,3],[2,2],[2,1]],\n        \"Completed\":[[2,4],[1,5],[0,6]],\n        \"NewChars\":[],\"NextTurn\":2,\n        \"GameScore\":[{\"Id\":17265,\"Title\":\"Log Horizon\",\"English\":\"Log Horizon\",\"Turn\":5,\"Characters\":[{\"Id\":81371,\"Name\":\"Naotsugu\",\"Img\":\"http://cdn.myanimelist.net/images/characters/11/200455.jpg\",\"Score\":1},{\"Id\":81369,\"Name\":\"Akatsuki\",\"Img\":\"http://cdn.myanimelist.net/images/characters/12/292611.jpg\",\"Score\":2},{\"Id\":81367,\"Name\":\"Shiroe\",\"Img\":\"http://cdn.myanimelist.net/images/characters/10/240997.jpg\",\n     \"Score\":3}]}]}\n};\n\nvar initialTutorial = {\n    \"Id\": \"test\",\n    \"Field\": [\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/10/240997.jpg\", \"Row\": 2, \"Col\": 0},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/12/292611.jpg\", \"Row\": 2, \"Col\": 4},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/6/83657.jpg\", \"Row\": 7, \"Col\": 4},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/11/200455.jpg\", \"Row\": 1, \"Col\": 5},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/10/103220.jpg\", \"Row\": 4, \"Col\": 1},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/3/55714.jpg\", \"Row\": 8, \"Col\": 0},\n        {\"Img\": \"http://cdn.myanimelist.net/images/characters/14/80297.jpg\", \"Row\": 4, \"Col\": 5}],\n    \"Height\": 9,\n    \"Width\": 9,\n    \"Line\": 3,\n    \"MaxTitleChar\": 5,\n    \"Turn\": 1,\n    \"Score\": {\n        \"CompletedTitles\": [],\n        \"CompletedGroups\": [],\n        \"TotalScore\": -1000,\n        \"ChangeImgs\": [],\n        \"Advices\": []\n    },\n    \"Date\": \"2016-08-08T22:21:52.819+03:00\",\n    \"EndDate\": \"2016-08-08T22:21:52.819+03:00\",\n    \"Difficulty\": 1,\n    \"UserName\": \"\",\n    \"UserItems\": []\n};\n\nvar charSelected20 = function (game) {\n    for(var field of game.Field) {\n        if (field.Row == 2 && field.Col == 0 && field.selected) {\n            return true;\n        }\n    }\n    return false;\n};\n\nvar charNotSelected20 = function (game) {\n    for(var field of game.Field) {\n        if (field.Row == 2 && field.Col == 0 && !field.selected) {\n            return true;\n        }\n    }\n    return false;\n};\n\nvar charDisapear24 = function (game) {\n    for(var field of game.Field) {\n        if (field.Row == 2 && field.Col == 4) {\n            return false;\n        }\n    }\n    return true;\n};\n\nvar tutorialStates = {\n    1: {\n        emotion: \"/static/img/emo/tsundere.png\", message: <div className=\"tutorial-msg\">\n            <p>Ничего без меня сделать не можешь.</p>\n            <p>Так уж и быть помогу тебе.</p>\n            <p>Только не думай, что я делаю это ради тебя.</p>\n        </div>, next: {state: 2}\n    },\n    2: {\n        emotion: \"/static/img/emo/tsundere.png\", message: <div className=\"tutorial-msg\">\n            <p>Многие персонажи потерялись в мире фансервиса.</p>\n            <p>Чтобы помочь им найти путь домой, необходимо собрать их силы вместе.</p>\n        </div>, next: {state: 3}\n    },\n    3: {\n        emotion: \"/static/img/emo/tsundere.png\", message: <div className=\"tutorial-msg\">\n            <p>Только те персонажи, которые знают друг друга становятся сильнее вместе.</p>\n            <p>Для этого нужно выстроить персонажей из одного аниме в вертикальную, горизонтальную или\n                диагональную линию.</p>\n        </div>, next: {state: 4}\n    },\n    4: {\n        emotion: \"/static/img/emo/tsundere.png\", message: <div className=\"tutorial-msg\">\n            <p>Когда в линию собираются 3 или более персонажей, то они отправляются домой, захватив всех своих знакомых.</p>\n            <p>Для мотивации я буду за это давать тебе очки.</p>\n            <p>Давай попробуем на примере.</p>\n        </div>, next: {state: 5, game: initialTutorial}\n    },\n    5: {\n        emotion: \"/static/img/emo/normal.png\", message: <div className=\"tutorial-msg\">\n            <p>Здесь у нас ребята из Log Horizon.</p>\n            <p>Давай поможем им.</p>\n        </div>, next: {state: 6}\n    },\n    6: {\n        emotion: \"/static/img/emo/normal.png\", message: <div className=\"tutorial-msg\">\n            <p>Выбери Shiroe кликнув по нему.</p>\n        </div>, next: {state: 7}, selected: ['.row2.col0'], hiddenNext: true, nextCondition: {7: charSelected20}\n    },\n    7: {\n        emotion: \"/static/img/emo/normal.png\", message: <div className=\"tutorial-msg\">\n            <p>Теперь перемести его к остальным, кликнув по зеленой клетке.</p>\n        </div>, next: {state: 8}, selected: ['.fieldCell:eq(6)', '#game'], hiddenNext: true, nextCondition: {8: charDisapear24, 20: charNotSelected20}\n    },\n    8: {\n        emotion: \"/static/img/emo/success.png\", message: <div className=\"tutorial-msg\">\n            <p>Отлично. Герои отправились домой!</p>\n        </div>, next: {state: 9}\n    },\n    9: {\n        emotion: \"/static/img/emo/sure.png\", message: <div className=\"tutorial-msg\">\n            <p>Ты справился с обучающим курсом.</p>\n            <p>По другому и не могло быть, ведь тебя учила я.</p>\n        </div>, next: {state: 10}\n    },\n    10: {\n        emotion: \"/static/img/emo/sure.png\", message: <div className=\"tutorial-msg\">\n            <p>Хоть я и считаю нашего разработчика бесполезным, если найдешь ошибку напиши ему overmes@gmail.com</p>\n        </div>, next: {state: 11}\n    },\n    11: {\n        emotion: \"/static/img/emo/waityou.png\", message: <div className=\"tutorial-msg\">\n            <p>Мы ведь еще увидимся?</p>\n        </div>, next: {state: 0}\n    },\n    20: {\n        emotion: \"/static/img/emo/panic.png\", message: <div className=\"tutorial-msg\">\n            <p>Аааа! Что ты делаешь? Выбери обратно Shiroe!</p>\n            <p>Бюджета не хватило на полную обучалку.</p>\n        </div>, next: {state: 7}, selected: ['.row2.col0'], hiddenNext: true, nextCondition: {7: charSelected20}\n    },\n\n\n};\n\nclass Tutorial extends React.Component {\n    componentWillReceiveProps(nextProps) {\n        const {state, endTutorial, nextTutorial, game} = nextProps;\n        if (state) {\n            const {emotion, message, next, hiddenNext, nextCondition} = tutorialStates[state];\n            if (nextCondition) {\n                for(var stateId in nextCondition) {\n                    if (nextCondition[stateId](game)) {\n                        nextTutorial({state: stateId});\n                    }\n                }\n            }\n        }\n        if (nextProps.state) {\n            if (!this.props.state) {\n                $('body').before('<div class=\"fog-of-war\"></div>')\n            }\n        } else {\n            $('.fog-of-war').remove()\n        }\n    }\n\n    componentDidUpdate() {\n        $('.tutorial-selected').removeClass('tutorial-selected');\n        if (this.props.state) {\n            const selected = tutorialStates[this.props.state].selected;\n            if (selected && selected.length) {\n                selected.forEach(selector => {\n                    $(selector).addClass('tutorial-selected');\n                })\n            }\n        }\n    }\n\n    render() {\n        const {state, endTutorial, nextTutorial, game} = this.props;\n        if (state) {\n            const {emotion, message, next, hiddenNext, nextCondition} = tutorialStates[state];\n            return <div id=\"tutorial\">\n                <img src={emotion} className=\"tutorial-img\"/>\n                {message}\n                <span className=\"tutorial-end tutorial-btn btn\" onClick={endTutorial}>Close</span>\n                {hiddenNext ? '':<span className=\"tutorial-next tutorial-btn btn\" onClick={nextTutorial.bind(null, next)}>Next</span>}\n            </div>\n        } else {\n            return <div style={{\"display\": \"none\"}}></div>\n        }\n    }\n}"]}